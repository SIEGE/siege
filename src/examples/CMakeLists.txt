CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
OPTION(BUILD_DEMOS "Build the demos" ON)

IF(BUILD_DEMOS)
    ADD_CUSTOM_TARGET(demos)

    OPTION(BUILD_DEMO_SPRITE "Build the sprite demo" ON)
    IF(BUILD_DEMO_SPRITE)
        PROJECT(Demo-Sprite)
        ADD_DEPENDENCIES(demos ${PROJECT_NAME})

        ADD_EXECUTABLE(${PROJECT_NAME} sprite)
        TARGET_LINK_LIBRARIES(${PROJECT_NAME} SIEGE)
        IF(UNIX)
            TARGET_LINK_LIBRARIES(${PROJECT_NAME} dl m)
        ENDIF(UNIX)

        INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin)
    ENDIF(BUILD_DEMO_SPRITE)

    OPTION(BUILD_DEMO_TEXT "Build the text demo" ON)
    IF(BUILD_DEMO_TEXT)
        PROJECT(Demo-Text)
        ADD_DEPENDENCIES(demos ${PROJECT_NAME})

        ADD_EXECUTABLE(${PROJECT_NAME} text)
        TARGET_LINK_LIBRARIES(${PROJECT_NAME} SIEGE)
        IF(UNIX)
            TARGET_LINK_LIBRARIES(${PROJECT_NAME} dl m)
        ENDIF(UNIX)

        INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin)
    ENDIF(BUILD_DEMO_TEXT)

    OPTION(BUILD_DEMO_PHYSICS "Build the physics demo" ON)
    IF(BUILD_DEMO_PHYSICS)
        PROJECT(Demo-Physics)
        ADD_DEPENDENCIES(demos ${PROJECT_NAME})

        ADD_EXECUTABLE(${PROJECT_NAME} physics)
        TARGET_LINK_LIBRARIES(${PROJECT_NAME} SIEGE)
        IF(UNIX)
            TARGET_LINK_LIBRARIES(${PROJECT_NAME} dl m)
        ENDIF(UNIX)

        INSTALL(TARGETS ${PROJECT_NAME} DESTINATION bin)
    ENDIF(BUILD_DEMO_PHYSICS)
ENDIF(BUILD_DEMOS)
